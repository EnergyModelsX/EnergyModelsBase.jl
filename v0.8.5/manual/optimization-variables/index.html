<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Optimization variables · EnergyModelsBase</title><meta name="title" content="Optimization variables · EnergyModelsBase"/><meta property="og:title" content="Optimization variables · EnergyModelsBase"/><meta property="twitter:title" content="Optimization variables · EnergyModelsBase"/><meta name="description" content="Documentation for EnergyModelsBase."/><meta property="og:description" content="Documentation for EnergyModelsBase."/><meta property="twitter:description" content="Documentation for EnergyModelsBase."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyModelsBase</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quick-start/">Quick Start</a></li><li><a class="tocitem" href="../philosophy/">Philosophy</a></li><li class="is-active"><a class="tocitem" href>Optimization variables</a><ul class="internal"><li><a class="tocitem" href="#man-opt_var-opex"><span>Operational cost variables</span></a></li><li><a class="tocitem" href="#man-opt_var-cap"><span>Capacity variables</span></a></li><li><a class="tocitem" href="#man-opt_var-flow"><span>Flow variables</span></a></li><li><a class="tocitem" href="#man-opt_var-emissions"><span>Emission variables</span></a></li><li><a class="tocitem" href="#man-opt_var-sink"><span><code>Sink</code> variables</span></a></li><li><a class="tocitem" href="#man-opt_var-node"><span>Node types and respective variables</span></a></li></ul></li><li><a class="tocitem" href="../constraint-functions/">Constraint functions</a></li><li><a class="tocitem" href="../data-functions/">Data functions</a></li><li><a class="tocitem" href="../simple-example/">Example</a></li><li><a class="tocitem" href="../investments/">Investment options</a></li><li><a class="tocitem" href="../NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Nodes</span><ul><li><a class="tocitem" href="../../nodes/source/">Source</a></li><li><a class="tocitem" href="../../nodes/networknode/">NetworkNode</a></li><li><a class="tocitem" href="../../nodes/storage/">Storage</a></li><li><a class="tocitem" href="../../nodes/sink/">Sink</a></li><li><a class="tocitem" href="../../nodes/availability/">Availability</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../how-to/create-new-node/">Create a new node</a></li><li><a class="tocitem" href="../../how-to/utilize-timestruct/">Utilize TimeStruct</a></li><li><a class="tocitem" href="../../how-to/update-models/">Update models</a></li><li><a class="tocitem" href="../../how-to/contribute/">Contribute to EnergyModelsBase</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">Public</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../library/public/resources/">Resources</a></li><li><a class="tocitem" href="../../library/public/model_data/">Modeltype and Data</a></li><li><a class="tocitem" href="../../library/public/nodes/">Nodes</a></li><li><a class="tocitem" href="../../library/public/links/">Links</a></li><li><a class="tocitem" href="../../library/public/functions/">Functions</a></li><li><a class="tocitem" href="../../library/public/misc/">Miscellaneous</a></li><li><a class="tocitem" href="../../library/public/emi_extension/">EMI extension</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Internal</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../library/internals/types/">Types</a></li><li><a class="tocitem" href="../../library/internals/functions/">Functions</a></li><li><a class="tocitem" href="../../library/internals/reference_EMIExt/">EMI extension</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Optimization variables</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Optimization variables</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsBase.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsBase.jl/blob/main/docs/src/manual/optimization-variables.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="man-opt_var"><a class="docs-heading-anchor" href="#man-opt_var">Optimization variables</a><a id="man-opt_var-1"></a><a class="docs-heading-anchor-permalink" href="#man-opt_var" title="Permalink"></a></h1><p><code>EnergyModelsBase</code> creates a variety of default variables for the individual nodes and edges. These default variables are in general also created when new <code>Node</code>s or <code>Link</code>s are developed. It is not necessary to utilize all of the default variables in the individual nodes. It is however recommended to include in this situation constraints or fixes using either the <code>@constraint</code> macro or alternatively the <code>JuMP</code> function <code>fix(x, value)</code>. The latter is the recommended approach.</p><div class="admonition is-info" id="Note-cc1b74cb7ecbe6b2"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-cc1b74cb7ecbe6b2" title="Permalink"></a></header><div class="admonition-body"><p>The majority of the variables in <code>EnergyModelsBase</code> are rate variables. This imples that they are calculated for either an operational period duration of 1, when indexed over operational period <span>$t$</span> or a strategic period duration of 1, when indexed over strategic period <span>$t_\texttt{inv}$</span>. Typical units for rates are MW for energy streams, tonne/hour for mass streams, tonne/year for strategic emissions, and €/year for operational expenditures. In this example, the duration of an operational period of 1 corresponds to an hour, while the duration of a strategic period of 1 corresponds to a year.</p><p>Variables that are energy/mass based have that property highlighted in the documentation below. In the standard implementation of <code>EnergyModelsBase</code>, this is only the case for the level of a <code>Storage</code> node, the change of level of the node, and its installed capacity.</p></div></div><p>Rate variables can as well be translated to mass/energy variables. As an example, the total quantity that flows into a node <span>$n$</span> during the operational period <span>$t$</span> can found by</p><pre><code class="language-julia hljs">m[:flow_in][n, t, p] * duration(t)</code></pre><p>The multiplication then leads to an energy/mass quantity in stead of an energy/mass flow.</p><p>The coupling of strategic and operational periods can be achieved through the function <code>scale_op_sp(t, t_inv)</code>. This functions allows for considering the scaling of the operational periods within a strategic period.</p><h2 id="man-opt_var-opex"><a class="docs-heading-anchor" href="#man-opt_var-opex">Operational cost variables</a><a id="man-opt_var-opex-1"></a><a class="docs-heading-anchor-permalink" href="#man-opt_var-opex" title="Permalink"></a></h2><p>Operational cost variables are included to account for operational expenditures (OPEX) of the model. These costs are pure dependent on either the use or the installed capacity of a node <span>$n$</span>. All nodes <span>$n$</span> (except <a href="../../library/public/nodes/#EnergyModelsBase.Availability"><code>Availability</code></a>-nodes) have the following variables representing the operational costs of the nodes:</p><ul><li><span>$\texttt{opex\_var}[n, t_\texttt{inv}]$</span>: Variable OPEX of node <span>$n$</span> in strategic period <span>$t_\texttt{inv}$</span>.</li><li><span>$\texttt{opex\_fixed}[n, t_\texttt{inv}]$</span>: Fixed OPEX of node <span>$n$</span> in strategic period <span>$t_\texttt{inv}$</span>.</li></ul><p>The variable OPEX is a cost that derives from using a technology. It is calculated using the function <a href="../../library/public/functions/#EnergyModelsBase.constraints_opex_var"><code>constraints_opex_var</code></a>. In general, it represents unmodelled feed to a process and the associated costs. Examples are catalyst replacement, cooling water or process water. The variable OPEX can also be utilized to provide values for a profit through using a technology.</p><p>The fixed OPEX is a cost that is independent of the usage of a technology. Instead, it is only dependent on the installed capacity. It is calculated using the function <a href="../../library/public/functions/#EnergyModelsBase.constraints_opex_fixed"><code>constraints_opex_fixed</code></a>. It represents fixed costs like labour cost, maintenance, as well as insurances and taxes.</p><p>We also introduce the potential for links with operational costs. By default, links do not introduce new variables. Operational cost variables are only created for a link <span>$l$</span> if the function <a href="../../library/public/links/#EnergyModelsBase.has_opex-Tuple{Link}"><code>has_opex(n::Link)</code></a> returns <code>true</code>. The following link variables are then declared representing the operational costs of the links:</p><ul><li><span>$\texttt{link\_opex\_var}[l, t_\texttt{inv}]$</span>:  Variable OPEX of link <span>$l$</span> in strategic period <span>$t_\texttt{inv}$</span>.</li><li><span>$\texttt{link\_opex\_foxed}[l, t_\texttt{inv}]$</span>:  Fixed OPEX of link <span>$l$</span> in strategic period <span>$t_\texttt{inv}$</span>.</li></ul><div class="admonition is-success" id="Links-with-OPEX-d392a4b367270703"><header class="admonition-header">Links with OPEX<a class="admonition-anchor" href="#Links-with-OPEX-d392a4b367270703" title="Permalink"></a></header><div class="admonition-body"><p>All links introduced in <code>EnergyModelsBase</code> do not allow for operational costs. If you plan to introduce a link with operational costs, you have to create a new method for the function <code>has_opex</code> for your introduced link.</p></div></div><h2 id="man-opt_var-cap"><a class="docs-heading-anchor" href="#man-opt_var-cap">Capacity variables</a><a id="man-opt_var-cap-1"></a><a class="docs-heading-anchor-permalink" href="#man-opt_var-cap" title="Permalink"></a></h2><p>Capacity variables focus on both the capacity usage and installed capacity. The capacity variables are also created for all nodes except for <a href="../../library/public/nodes/#EnergyModelsBase.Availability"><code>Availability</code></a> nodes. Capacity variables are differentiated between <code>Storage</code> nodes and all other <code>Node</code>s. The implementation of the capacity variables allows for a time-varying capacity during an operational period for inclusion of variations in the demand in <code>Sink</code> nodes. It is however not possible to invest into a time-varying capacity.</p><p>The following capacity variables are created for node types other than <code>Storage</code>:</p><ul><li><span>$\texttt{cap\_use}[n, t]$</span>: Absolute capacity usage of node <span>$n$</span> at operational period <span>$t$</span>, and</li><li><span>$\texttt{cap\_inst}[n, t]$</span>: Installed capacity of node <span>$n$</span> at operational period <span>$t$</span>.</li></ul><p>The capacity usage <span>$\texttt{cap\_use}$</span> is the utilization of the installed capacity. It is declared in absolute values to avoid bilinearities when investing in capacities. It is normally constrained by the variable <span>$\texttt{cap\_inst}$</span> of the individual nodes, except for <code>Sink</code> nodes.</p><p>The capacity variables for <code>Storage</code> nodes differentiate between storage capacity (stored energy in the <code>Storage</code> node) and rate of storage (storage rate of a <code>Storage</code> node). The latter is furthermore differentiated between charging and discharging a <code>Storage</code> node. A key reasoning for this approach is that it is in general possible to invest both in the storage rate (<em>e.g.</em>, the AC-DC transformer required in battery storage) as well as the storage capacity (<em>e.g.</em> the number of cells in battery storage). The same holds as well for pumped hydro storage and storage of gases where there is a further differentiation between the maximum charging and discharging rates. The differentiation leads to the following variables for <code>Storage</code> nodes:</p><ul><li><span>$\texttt{stor\_level}[n, t]$</span>: Absolute level of energy/mass stored in a <code>Storage</code> node <span>$n$</span> at operational period <span>$t$</span> with a typical unit of GWh or t,</li><li><span>$\texttt{stor\_level\_inst}[n, t]$</span>: Installed storage capacity in a <code>Storage</code> node <span>$n$</span> at operational period <span>$t$</span> , that is the upper bound for the variable <span>$\texttt{stor\_level}[n, t]$</span>, with a typical unit of GWh or t,</li><li><span>$\texttt{stor\_charge\_use}[n, t]$</span>: Usage of the charging rate of a <code>Storage</code> node <span>$n$</span> at operational period <span>$t$</span> with a typical unit of GW or t/h,</li><li><span>$\texttt{stor\_charge\_inst}[n, t]$</span>: Maximum available charging rate of a <code>Storage</code> node <span>$n$</span> at operational period <span>$t$</span>, that is the upper bound for the variable <span>$\texttt{stor\_charge\_use}[n, t]$</span>, with a typical unit of GW or t/h.</li><li><span>$\texttt{stor\_discharge\_use}[n, t]$</span>: Usage of the discharging rate of a <code>Storage</code> node <span>$n$</span> at operational period <span>$t$</span> with a typical unit of GW or t/h, and</li><li><span>$\texttt{stor\_discharge\_inst}[n, t]$</span>: Maximum available discharging rate of a <code>Storage</code> node <span>$n$</span> at operational period <span>$t$</span>, that is the upper bound for the variable <span>$\texttt{stor\_discharge\_use}[n, t]$</span>, with a typical unit of GW or t/h.</li></ul><div class="admonition is-info" id="Note-d10d72c0b33483ba"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-d10d72c0b33483ba" title="Permalink"></a></header><div class="admonition-body"><p>It is not necessary that a <code>Storage</code> node has a charge and discharge capacity. It is possible to not specify a capacity for charge and discharge. In this instance, the variables for the intalled capacities are omitted and the charge and discharge usage is unlimited.</p></div></div><p>The storage level is always defined for the end of the operational period it is indexed over. There are in addition two variables for the storage level that behave slightly different:</p><ul><li><span>$\texttt{stor\_level\_Δ\_op}[n, t]$</span>: Change of the absolute level of energy/mass stored in a <code>Storage</code> node <span>$n$</span> in operational period <span>$t$</span> with a typical unit of GWh or t, and</li><li><span>$\texttt{stor\_level\_Δ\_rp}[n, t_{rp}]$</span>: Change of the absolute level of energy/mass stored in a <code>Storage</code> node <span>$n$</span> in representative period <span>$t_{rp}$</span> with a typical unit of GWh or t, and</li><li><span>$\texttt{stor\_level\_Δ\_sp}[n, t_\texttt{inv}]$</span>: Change of the absolute level of energy/mass stored in a <code>Storage</code> node <span>$n$</span> in strategic period <span>$t_\texttt{inv}$</span> with a typical unit of GWh or t.</li></ul><p>These variables are introduced to track the change in the storage level in an operational period, a representative period, or an investment period, respectively. They can be considered as helper variables to account for the duration of the operational period as well as the total change within a representative period. <span>$\texttt{stor\_level\_Δ\_rp}$</span> is only declared if the <code>TimeStructure</code> includes <code>RepresentativePeriods</code> while <span>$\texttt{stor\_level\_Δ\_sp}$</span> is introduced as an empty <code>SparseVariables</code> container. The application of <code>RepresentativePeriods</code> is explained in <em><a href="../../how-to/utilize-timestruct/#how_to-utilize_TS-struct-rp">How to use TimeStruct.jl</a></em>. The utilization of <span>$\texttt{stor\_level\_Δ\_sp}$</span> requires to include in the function <a href="../../library/public/functions/#EnergyModelsBase.variables_node"><code>variables_node</code></a> for the given <code>Storage</code> array <code>𝒩ˢᵘᵇ::Vector{&lt;:NewStorageNode}</code> as, <em>e.g.</em>, the following loop</p><pre><code class="language-julia hljs">for t_inv ∈ 𝒯ᴵⁿᵛ, n ∈ 𝒩ˢᵘᵇ
    insertvar!(m[:stor_level_Δ_sp], n, t_inv)
end</code></pre><p>We also introduce the potential for links with capacities. By default, links do not introduce new variables. The capacity variable is only created for a link <span>$l$</span> if the function <a href="../../library/public/links/#EnergyModelsBase.has_capacity-Tuple{Link}"><code>has_capacity(n::Link)</code></a> returns <code>true</code>. The following link variable ise then declared representing the capacity of links:</p><ul><li><span>$\texttt{link\_cap\_inst}[l, t]$</span>: Installed capacity of link <span>$l$</span> at operational period <span>$t$</span>.</li></ul><div class="admonition is-success" id="Links-with-a-capacity-a8bc563f011b4bf5"><header class="admonition-header">Links with a capacity<a class="admonition-anchor" href="#Links-with-a-capacity-a8bc563f011b4bf5" title="Permalink"></a></header><div class="admonition-body"><p>All links introduced in <code>EnergyModelsBase</code> do not allow for a capacity limiting the transfer. If you plan to introduce a link with a capacity, you have to create a new method for the function <code>has_capacity</code> for your introduced link.</p></div></div><div class="admonition is-info" id="Inclusions-of-investments-f08db64c1e4de280"><header class="admonition-header">Inclusions of investments<a class="admonition-anchor" href="#Inclusions-of-investments-f08db64c1e4de280" title="Permalink"></a></header><div class="admonition-body"><p>The variables <span>$\texttt{cap\_inst}$</span>, <span>$\texttt{stor\_charge\_inst}$</span>, <span>$\texttt{stor\_level\_inst}$</span>, <span>$\texttt{stor\_discharge\_inst}$</span>, and <span>$\texttt{link\_cap\_inst}$</span> are used in <code>EnergyModelsInvestment</code> to allow for investments in capacity of individual nodes.</p></div></div><h2 id="man-opt_var-flow"><a class="docs-heading-anchor" href="#man-opt_var-flow">Flow variables</a><a id="man-opt_var-flow-1"></a><a class="docs-heading-anchor-permalink" href="#man-opt_var-flow" title="Permalink"></a></h2><p>Flow variables correspond to the input to and output from both technology nodes and links. They are always positive to avoid backflow.</p><p>The following flow variables are defined for the nodes:</p><ul><li><span>$\texttt{flow\_in}[n, t, p]$</span> represents the flow rate of resource <span>$p$</span> into node <span>$n$</span> at operational period <span>$t$</span>. It is created for subtypes of the types <a href="../../library/public/nodes/#EnergyModelsBase.NetworkNode"><code>NetworkNode</code></a> and <a href="#Sink"><code>Sink</code></a> based on the field <code>input</code> in the <code>composite type</code>.</li><li><span>$\texttt{flow\_out}[n, t, p]$</span> represents the flow rate of resource <span>$p$</span> out of node <span>$n$</span> at operational period <span>$t$</span>. It is created for subtypes of the types <a href="#Source"><code>Source</code></a> and <a href="../../library/public/nodes/#EnergyModelsBase.NetworkNode"><code>NetworkNode</code></a> based on the field <code>output</code> in the <code>composite type</code>.</li></ul><p>Links also have corresponding flow variables given by:</p><ul><li><span>$\texttt{link\_in}[n, t, p]$</span> represents the flow rate of resource <span>$p$</span> into link <span>$l$</span> at operational period <span>$t$</span>, and</li><li><span>$\texttt{link\_out}[n, t, p]$</span> represents the flow rate of resource <span>$p$</span> out of link <span>$l$</span> at operational period <span>$t$</span>.</li></ul><p>The resource index <span>$p$</span> is created based on the intersection of the output of the input node <span>$n_{in}$</span> and the input of the output node <span>$n_{out}$</span> through the function <a href="../../library/internals/functions/#EnergyModelsBase.link_res"><code>EMB.link_res(l::Link)</code></a>. Mathematically, this is given as</p><p><span>$\mathcal{P}^{link} = \mathcal{P}^{n^{out}_{in}} \cap \mathcal{P}^{n^{in}_{out}}.$</span></p><p>It is also possible to create a new method for this function to limit the resources a link can transport.</p><h2 id="man-opt_var-emissions"><a class="docs-heading-anchor" href="#man-opt_var-emissions">Emission variables</a><a id="man-opt_var-emissions-1"></a><a class="docs-heading-anchor-permalink" href="#man-opt_var-emissions" title="Permalink"></a></h2><p>Emission variables are used for accounting for emissions of the individual technologies. Resources that can be emitted are defined through the type <a href="../../library/public/resources/#EnergyModelsBase.ResourceEmit"><code>ResourceEmit</code></a>. Nodes do not necessarily have associated emission variables. Emission variables are only created for a node <span>$n$</span> if the function <a href="../../library/public/nodes/#EnergyModelsBase.has_emissions-Tuple{EnergyModelsBase.Node}"><code>has_emissions(n::EMB.Node)</code></a> returns <code>true</code>. This is the case for all nodes that have <a href="../../library/public/model_data/#EnergyModelsBase.EmissionsData"><code>EmissionsData</code></a> within their field <code>data</code> as well as for a <code>RefStorage</code> node if a <code>ResourceEmit</code> is stored. The following node variable is then declared for all emission resource 𝒫ᵉᵐ:</p><ul><li><span>$\texttt{emissions\_node}[n, t, p_\texttt{em}]$</span>:  Emissions of node <span>$n$</span> at operational period <span>$t$</span> of emission resource <span>$p_\texttt{em}$</span>.</li></ul><p>Similarly, it is not necessary that links have associated emission variables. Emission variables are only created for a link <span>$l$</span> if the function <a href="../../library/public/links/#EnergyModelsBase.has_emissions-Tuple{Link}"><code>has_emissions(n::Link)</code></a> returns <code>true</code>. The following link variable is then declared for all emission resource 𝒫ᵉᵐ:</p><ul><li><span>$\texttt{emissions\_link}[n, t, p_\texttt{em}]$</span>:  Emissions of link <span>$l$</span> at operational period <span>$t$</span> of emission resource <span>$p_\texttt{em}$</span>.</li></ul><div class="admonition is-success" id="Links-with-emissions-9cb4ed8a64cf9351"><header class="admonition-header">Links with emissions<a class="admonition-anchor" href="#Links-with-emissions-9cb4ed8a64cf9351" title="Permalink"></a></header><div class="admonition-body"><p>All links introduced in <code>EnergyModelsBase</code> do not allow for emissions. If you plan to introduce a link with emissions, you have to create a new method for the function <code>has_emissions</code> for your introduced link.</p><p>We have not implemented a similar approach as for nodes. It is however planned to allow for transmission emissions in the near future, similar to the concept employed for process emissions for nodes.</p></div></div><p>In addition, <code>EnergyModelsBase</code> declares the following variables for the global emissions:</p><ul><li><span>$\texttt{emissions\_total}[t, p_\texttt{em}]$</span>: Total emissions of <code>ResourceEmit</code> <span>$p_\texttt{em}$</span> in operational period <span>$t$</span>, and</li><li><span>$\texttt{emissions\_strategic}[t_\texttt{inv}, p_\texttt{em}]$</span>: Total emissions of <code>ResourceEmit</code> <span>$p_\texttt{em}$</span> in strategic period <span>$t_\texttt{inv}$</span>.</li></ul><p>These emission variables introduce limits on the total emissions of a resource through the field <code>emission_limit</code> of an <code>EnergyModel</code> in the function <a href="../../library/internals/functions/#EnergyModelsBase.variables_emission"><code>EMB.variables_emission</code></a>.</p><h2 id="man-opt_var-sink"><a class="docs-heading-anchor" href="#man-opt_var-sink"><code>Sink</code> variables</a><a id="man-opt_var-sink-1"></a><a class="docs-heading-anchor-permalink" href="#man-opt_var-sink" title="Permalink"></a></h2><p><code>Sink</code> nodes are somehow different to the other nodes as they have additional variables associated with them. A key point here is to keep the overall mass balance intact while allowing for both overfulfilling and not meeting the demand. These variables are:</p><ul><li><span>$\texttt{sink\_surplus}[n, t]$</span>: Surplus of energy/mass to <code>Sink</code> <span>$n$</span> at operational period <span>$t$</span>, and</li><li><span>$\texttt{sink\_deficit}[n, t]$</span>: Deficit of energy/mass to <code>Sink</code> <span>$n$</span> at operational period <span>$t$</span>.</li></ul><p>The surplus in a sink corresponds to the energy/mass that is supplied to the sink in addition to the demand. The deficit in a sink corresponds to the energy/mass that is not supplied to the sink although the demand is specified. Both variables correspond to slack variables of the optimization problem. They simplify the problem and can make certain types of formulations feasible. It is possible to provide penalties for both surplus and deficits. This is implemented through the field <code>penalty</code> in the <a href="../../library/public/nodes/#EnergyModelsBase.RefSource"><code>RefSource</code></a> node.</p><h2 id="man-opt_var-node"><a class="docs-heading-anchor" href="#man-opt_var-node">Node types and respective variables</a><a id="man-opt_var-node-1"></a><a class="docs-heading-anchor-permalink" href="#man-opt_var-node" title="Permalink"></a></h2><p>As outlined in the introduction, <code>EnergyModelsBase</code> declares different variables for each <code>Node</code>. These variables are for the individual nodes given in the subsections below.</p><h3 id="Source"><a class="docs-heading-anchor" href="#Source"><code>Source</code></a><a id="Source-1"></a><a class="docs-heading-anchor-permalink" href="#Source" title="Permalink"></a></h3><ul><li><a href="#man-opt_var-opex"><span>$\texttt{opex\_var}$</span></a></li><li><a href="#man-opt_var-opex"><span>$\texttt{opex\_fixed}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{cap\_use}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{cap\_inst}$</span></a></li><li><a href="#man-opt_var-flow"><span>$\texttt{flow\_out}$</span></a></li><li><a href="#man-opt_var-emissions"><span>$\texttt{emissions\_node}$</span></a> if <code>EmissionsData</code> is added to the field <code>data</code></li></ul><h3 id="NetworkNode,-except-for-Storage"><a class="docs-heading-anchor" href="#NetworkNode,-except-for-Storage"><code>NetworkNode</code>, except for <code>Storage</code></a><a id="NetworkNode,-except-for-Storage-1"></a><a class="docs-heading-anchor-permalink" href="#NetworkNode,-except-for-Storage" title="Permalink"></a></h3><ul><li><a href="#man-opt_var-opex"><span>$\texttt{opex\_var}$</span></a></li><li><a href="#man-opt_var-opex"><span>$\texttt{opex\_fixed}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{cap\_use}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{cap\_inst}$</span></a></li><li><a href="#man-opt_var-flow"><span>$\texttt{flow\_in}$</span></a></li><li><a href="#man-opt_var-flow"><span>$\texttt{flow\_out}$</span></a></li><li><a href="#man-opt_var-emissions"><span>$\texttt{emissions\_node}$</span></a> if <code>EmissionsData</code> is added to the field <code>data</code></li></ul><h3 id="Storage"><a class="docs-heading-anchor" href="#Storage"><code>Storage</code></a><a id="Storage-1"></a><a class="docs-heading-anchor-permalink" href="#Storage" title="Permalink"></a></h3><ul><li><a href="#man-opt_var-opex"><span>$\texttt{opex\_var}$</span></a></li><li><a href="#man-opt_var-opex"><span>$\texttt{opex\_fixed}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_level}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_level\_inst}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_charge\_use}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_charge\_inst}$</span></a>, if the <code>Storage</code> node has a field <code>:charge</code> with the <code>StorageParameters</code> corresponding to <em><a href="../../library/public/nodes/#lib-pub-nodes-stor_par">capacity storage parameters</a></em></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_discharge\_use}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_discharge\_inst}$</span></a>, if the <code>Storage</code> node has a field <code>:discharge</code> with the <code>StorageParameters</code> corresponding to <em><a href="../../library/public/nodes/#lib-pub-nodes-stor_par">capacity storage parameters</a></em></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_level\_Δ\_op}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_level\_Δ\_rp}$</span></a> if the <code>TimeStruct</code> includes <code>RepresentativePeriods</code></li><li><a href="#man-opt_var-cap"><span>$\texttt{stor\_level\_Δ\_sp}$</span></a> if the function <a href="../../library/public/functions/#EnergyModelsBase.variables_node"><code>variables_node</code></a> is declared for the new <code>Storage</code> type</li><li><a href="#man-opt_var-flow"><span>$\texttt{flow\_in}$</span></a></li><li><a href="#man-opt_var-flow"><span>$\texttt{flow\_out}$</span></a></li><li><a href="#man-opt_var-emissions"><span>$\texttt{emissions\_node}$</span></a> if <code>ResourceEmit</code> is stored</li></ul><h3 id="Sink"><a class="docs-heading-anchor" href="#Sink"><code>Sink</code></a><a id="Sink-1"></a><a class="docs-heading-anchor-permalink" href="#Sink" title="Permalink"></a></h3><ul><li><a href="#man-opt_var-opex"><span>$\texttt{opex\_var}$</span></a></li><li><a href="#man-opt_var-opex"><a href="#man-opt_var-opex"><span>$\texttt{opex\_fixed}$</span></a></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{cap\_use}$</span></a></li><li><a href="#man-opt_var-cap"><span>$\texttt{cap\_inst}$</span></a></li><li><a href="#man-opt_var-flow"><span>$\texttt{flow\_in}$</span></a></li><li><a href="#man-opt_var-sink"><span>$\texttt{sink\_surplus}$</span></a></li><li><a href="#man-opt_var-sink"><span>$\texttt{sink\_deficit}$</span></a></li><li><a href="#man-opt_var-emissions"><span>$\texttt{emissions\_node}$</span></a> if <code>EmissionsData</code> is added to the field <code>data</code></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../philosophy/">« Philosophy</a><a class="docs-footer-nextpage" href="../constraint-functions/">Constraint functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Thursday 23 October 2025 10:39">Thursday 23 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
